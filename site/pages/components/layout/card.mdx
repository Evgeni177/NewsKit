import Playground, {withProps} from '../../../components/playground';
import Prop from '../../../components/prop';
import {LegacyBlock} from '../../../components/legacy-block';
import Layout from '../../../components/layout';
import {
  Card,
  Tag,
  TagSize,
  Flow,
  Stack,
  StackDistribution,
  Link,
  UnorderedList,
} from 'newskit';
import {CodeFromDefaultPresets, CodeFromFile} from '../../../components/code';
import {CardVerticalMediumWithoutInset} from '../../../demo-components/card/card-vertical-medium-without-inset';
import {CardVerticalSmallWithInset} from '../../../demo-components/card/card-vertical-small-with-inset';
import {CardHorizontalMediumWithoutInset} from '../../../demo-components/card/card-horizontal-medium-without-inset';
import {InlineCode} from '../../../components/markdown-elements';

export default Layout;

# Card

## Overview

Cards group content that allows users to browse a collection of related items and actions in a modular, easy-to-read way.
There are three main areas to the card component: Media, Content and Action area.

### Usage

Cards are used to display a summary of content and will reveal more details upon interaction.

### Variants

There are two card variants - card without inset `<Card/>` card with inset `<CardInset/>`

## Props

<LegacyBlock marginTop="sizing040">
  <Prop name="href" type="string | BaseLinkProps">
    If provided, the Card will render with an anchor.
    Both <InlineCode>string</InlineCode> and <InlineCode>BaseLinkProps</InlineCode> are supported,
    <InlineCode>BaseLinkProps</InlineCode> is derived from <InlineCode>React.AnchorHTMLAttributes</InlineCode>,
    providing access to all anchor props. For more details check the Interactivity section below.
  </Prop>
  <Prop name="layout" type="'vertical' | 'horizontal' | 'horizontal-reverse'" default="vertical">
    The card supports three layouts:
    <br />
    <br />
    <UnorderedList>
      <>
        <InlineCode>vertical</InlineCode> - The card is stacked vertically, displaying top to bottom:
        media, content and action items.
      </>
      <>
        <InlineCode>horizontal</InlineCode> - The card is laid out horizontally, media on the left
        and content stacked above action items on right.
      </>
      <>
        <InlineCode>horizontal-reverse</InlineCode> - The card is laid out horizontally,
        content stacked above action items on left with media on the right.
      </>
    </UnorderedList>

  </Prop>
  <Prop name="media" type="ImageProps | React.ComponentType">
    If this parameter is provided as <InlineCode>ImageProps</InlineCode> object (see <Link href="/components/media/image">Image documentation</Link>), it will render the media as an image.<br />
    If this is provided as a custom React component, it will render the React component directly.
  </Prop>
  <Prop name="mediaInteractive" type="boolean" default={false}>
    Removes the card media from link area. This prop only matters when the card is used as a link
    and when custom media or video components are passed as cardMedia so the user can interact with the video (play, pause, etc...) without navigation to occur. 
    <br/><b>NOTE:</b> If necessary, make sure your media element is tabbable  by adding <InlineCode>tabindex</InlineCode> to it.
  </Prop>
  <Prop name="children" type="Exclude<React.ReactNode, 'undefined'>" required>
    This is the body of the Card. A card requires to have at least a heading. Each element of the body content should be wrapped within a <Link href="/components/layout/block">Block</Link> component
    which is responsible for the spacing between the elements. Refer to the examples below.
  </Prop>

  <Prop name="actions" type="React.ComponentType">
    If provided, the Card will render the React component being passed to the actions. This could be buttons, tags and/or links.
    The actions section is typically placed at the bottom of the card and would only be clickable if the child components would be.<br />
    If there are multiple items, it is advised to use the Stack component to display the items. Refer to the examples below.<br />
  </Prop>
  <Prop name="overrides" type="object">
    If provided, overrides the respective presets for the component and provided elements.
    <Prop name="stylePreset" type="MQ<string>">
      If provided, this overrides the style preset of the card.
    </Prop>
    <Prop name="mediaContainer" type="object">
      <Prop name="stylePreset" type="MQ<string>">
        If provided, this overrides the style preset applied to the passed media container.
      </Prop>
      <Prop name="spaceInline" type="MQ<SpacingPresetKeys>">
        If provided, this overrides the space between the media container and the container that holds the content and actions area.
      </Prop>
    </Prop>
    <Prop name="teaserContainer" type="object">
      <Prop name="stylePreset" type="MQ<string>" >
        If provided, this overrides the style preset applied to the teaser container.
      </Prop>
      <Prop name="spaceInset" type="MQ<string>">
        If provided, applies padding to the teaser container.
      </Prop>
    </Prop>
    <Prop name="actionsContainer" type="object">
      <Prop name="stylePreset" type="MQ<string>" >
        If provided, this overrides the style preset applied to the actions container.
      </Prop>
      <Prop name="minHeight" type="string">
        If provided, this sets a minimum height to the actions container. This can be a sizing
        token from the theme, or any CSS length value.
      </Prop>
      <Prop name="spaceInset" type="MQ<string>">
        If provided, applies padding to the actions container.
      </Prop>
    </Prop>
    Refer to the defaults below for the object structure:
    <CodeFromDefaultPresets componentName='card' />
  </Prop>
</LegacyBlock>

### Examples

#### Prerequisites

<CodeFromFile path="examples/card/common.tsx" />

#### Vertical card

##### Card without inset

<CardVerticalMediumWithoutInset/>
<CodeFromFile path="examples/card/vertical-card-medium-without-inset.tsx" />

##### Card with inset

<CardVerticalSmallWithInset/>
<CodeFromFile path="examples/card/vertical-card-small-with-inset.tsx" />

#### Horizontal card

##### Card without inset

<CardHorizontalMediumWithoutInset/>
<CodeFromFile path="examples/card/horizontal-card-medium-without-inset.tsx" />

### Interactivity

When the Card component has a link applied to it (making it interactive), it is recommended
to pass the [Headline](/components/text-content/headline) as a child,
inside of the card content area. In this case the Headline will have a link applied to it,
which can have multiple interactivity states (hover, visited, etc.) applied
directly to the overrides of the Headline component, also make sure you pass the
following overrides to the Headline kicker <InlineCode>headlineKickerInteractive</InlineCode>
and heading <InlineCode>headlineHeadingInteractive</InlineCode> (or your own custom presets),
as shown in the example above. For this implementation, we use a z-index property in order to
exclude the actions area and the media area (when we have mediaInteractive = true) from the link area.

**NOTE:** It is not mandatory for the headline component to be direct child of the card content. It can be nested inside a structure,
but make sure it does not have any parents with `position: relative` style applied as it will break the clickable area of the link.

**NOTE:** Passing styled component created from the Headline to the card content would not work correctly when the card is used as a link.
Instead use the Headline overrides to modify its styles. Otherwise, the interactivity of the link will not work as expected.

### Accessibility

- Always pass an `alt` prop to the card image regardless of whether you use the built in or a custom image component.
- When creating a tab order for the different parts of the card, remember to put the headline before the image or media so that screen-reader users get the context before the image alt tag.
- When passing custom interactive component (i.e. video) as card media remember to take care of making the media component visible for screen readers by adding tabindex if necessary.
- Add aria-label prop to allow a user to describe the action that will be performed when the user interacts with the card. By default, this could be the headline text.
- When nesting other components of the card, always follow those components' accessibility guidelines.
