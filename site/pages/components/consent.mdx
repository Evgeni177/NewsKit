import Layout from '../../components/layout';
import Playground from '../../components/playground';
import Prop from '../../components/prop';
import {Code, CodeFromFile} from '../../components/code';
import {LegacyBlock} from '../../components/legacy-block';

export default Layout;

# Consent

## Overview

The consent component is a non-visual component for the consent of the use of 3rd party cookies. It triggers the loading of a Sourcepoint CMP (Content Management Platform) dialog to allow the user to decide what 3rd party cookies they wish to allow or disallow on their browser. Unless you are utilising React Helmet, it must be placed inside the head of the document during server-side rendering. NewsKit has both an AMP and non-AMP version of this component. The two are not interchangeable so you must ensure you use the correct one.

## Prerequisites

To utilise this component you will need to have a [Sourcepoint](https://www.sourcepoint.com) account and, if required, a Sourcepoint messaging subdomain set up. For more information please see Sourcepoint [documentation](https://documentation.sourcepoint.com/web-implementation/sourcepoint-set-up-and-configuration-v2).

## Usage

<CodeFromFile path="examples/consent.tsx" />

## Props

<LegacyBlock $marginTop="sizing040">
  <Prop name='sourcePointConfig' type="SourcePointConfigProps"  required>
    The config config that initialises sourcePoint.
    Required parameters: <b>accountId</b>.
    optional Parameters: <b>siteHref, privacyManagerId, siteId, targetingParams, mmsDomain, waitForConsent</b>. See <a href="https://documentation.sourcepoint.com/web-implementation/sourcepoint-set-up-and-configuration-v2">Sourcepoint documentation</a> for full description of options.
  </Prop>
  <Prop name="accountId" type="string">
    <b>This Prop is deprecated on the component and should be set in the sourcepoint config.</b> Your Sourcepoint account id.
  </Prop>
  <Prop
    name="mmsDomain"
    type="string"
    default="https://message{accountId}.sp-prod.net"
  >
    <b>This Prop is deprecated on the component and should be set in the sourcepoint config. </b>
    Can be changed to a CNAMED subdomain in order to deliver 1st party cookies
    on Safari web browser (due to Safariâ€™s ITP). Changing the mmsDomain is
    optional! More information about setting up an mmsDomain below.
  </Prop>
  <Prop name="waitForConsent" type="boolean" default="true">
    When true (the default value), the consent component will cause prebid.js to
    wait for user consent to be provided before it initialises.
  </Prop>
  <Prop name="reactHelmet" type="react-helmet Helmet Component">
    By default the Consent component will inject its scripts by rendering script
    tags. However, if your project is using &nbsp;
    <a href="https://www.npmjs.com/package/react-helmet" target="_blank">React Helmet</a>
    &nbsp; you can pass the Helmet
    component in and the scripts will render using that component.
  </Prop>
</LegacyBlock>

## How to run on localhost

The minimum parameters for the Consent component to run locally are a sourcePointConfig object with accountId and siteHref.
The `siteHref` property should be an url that that exists in your account's property group. Contact your sourcepoint account manager.

In our case it would look like this:
<Code>
  {`<Consent
    sourcePointConfig={{
      accountId: accountId,
      siteHref: 'http://newskit.co.uk/'
    }}
  />`}
</Code>



# AMP

## Usage With AMP

Note the use of the AMP `Head` component. The `Consent` component must be used as a child of `Head`. See [Getting Started with AMP](/guides/getting-started-amp) for more information.

<CodeFromFile path="examples/amp/consent.tsx" />

## Props With AMP

<LegacyBlock $marginTop="sizing040">
  <Prop name='sourcePointConfig' type="SourcePointConfigProps" required>
    The config config that initialises sourcePoint.
    Required parameters: <b>accountId, siteName</b>.
    optional Parameters: <b>privacyManagerId, siteId and targetingParams</b>.
  </Prop>
  <Prop name="postPromptUI" type="string" default="privacy-settings-prompt">
    This is the reference to on-page element that will display after a user has
    provided consent. When this element appears a user can click on it to change
    their consent preferences.
  </Prop>
  <Prop name="settingsButtonText" type="string" default="Privacy Settings">
    The value of this prop will define the text contained in the consent's button
    that allows the user to access to the privacy settings for the cookies.
  </Prop>
   <Prop name="accountId" type="string">
    <b>This Prop is deprecated on the component and should be set in the sourcepoint config. </b>Your Sourcepoint account id.
  </Prop>
  <Prop name="siteName" type="string">
    <b>This Prop is deprecated on the component and should be set in the sourcepoint config. </b>The name of your site.
  </Prop>
  <Prop name="privacyManagerId" type="string">
    <b>This Prop is deprecated on the component and should be set in the sourcepoint config. </b> This attribute corresponds to the ID of the privacy manager used for this
    site.
  </Prop>
</LegacyBlock>
