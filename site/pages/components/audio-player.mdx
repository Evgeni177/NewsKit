import Layout from '../../components/layout';
import Playground from '../../components/playground';
import Prop from '../../components/prop';

import {AudioPlayer, UnorderedList, Circle, Block} from 'newskit';

export default Layout;

# Audio Player

## Overview

The Audio Player component is a collection of custom features and elements built around the native `<audio>` element.

### Usage

The Audio Player requires a source stream to be passed in as a prop. This will then be loaded into the internal `<audio>` element for playback.

## Props

<Block marginTop="sizing05">
  <Prop name="src" type="string" required>
    URL of the audio source to be played.
  </Prop>
  <Prop name="live" type="boolean">
    If true will display the controls for live player.
  </Prop>
  <Prop name="autoplay" type="boolean">
    <div>
      Even though the feature is supported in most browser but the browser will
      only follow this setting if:
    </div>
    <ul>
      <li>
        you are on a desktop browser. it will not work on mobile browsers to
        prevent users from eating into their mobile data allowance
      </li>
      <li>
        it can't happen on page load, the user has to interact with the site for
        it to work: navigating inside an SPA seems to satisfy the browser as
        there was no page refresh.
      </li>
    </ul>
    <div>
      In Summary autoplay will work in some scenarios, this is expected. It's
      best thought of as a suggestion for the browser: play the audio
      automatically if it's acceptable from a usability perspective
    </div>
  </Prop>
  <Prop name="tags" type="Array<string>">
    List of tags to describe the current show, e.g. comedy, politics
  </Prop>
  <Prop name="captionSrc" type="string">
    Source for audio transcription generally provided in{' '}
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebVTT_API">
      web vtt format
    </a>
    .
  </Prop>
  <Prop name="onPreviousTrack" type="function">
    This function defines the callback of the previous track button
    for the first 5 secodns of the track. 
    If onPreviousTrack is not provided, the previous track button
    will be disabled for the first 5 seconds of the track. <b>After
    the first 5 seconds the button's functionality is overridden
    to go to the start of the track.</b>
  </Prop>
  <Prop name="onNextTrack" type="function">
    Will display the next track button, provided function is executed on click.
  </Prop>
  <Prop name="disableNextTrack" type="boolean">
    Disable the next track button.
  </Prop>
  <Prop name="disablePreviousTrack" type="boolean">
    Disable the previous track button.
  </Prop>
  <Prop name="popoutHref" type="string">
    Url to player hosted by itself on page. Will open in a new window and pause current instance.
  </Prop>
  <Prop name="volumePresets" type="Object<SliderStylePresets>">
    <div>
      This prop is an object containing all the following volume slider style
      presets. For more details please see the slider prop documentation &nbsp;
      <a href="/components/slider">here</a>. The default style presets can be changed via
      the theme.
    </div>
    <ul>
      <li>sliderIndicatorTrackStylePreset</li>
      <li>sliderThumbStylePreset</li>
      <li>sliderTrackStylePreset</li>
      <li>sliderLabelsStylePreset</li>
    </ul>
  </Prop>
  <Prop name="trackPresets" type="Object<SliderStylePresets>">
    This prop is for the audio track slider, it has the same keys as
    volumePresets, plus "bufferingStylePreset" to allow overriding of the
    buffering colour. If in live mode, the track slider is not shown and so
    these presets are ignored. The default style presets can be changed via the
    theme.
  </Prop>
  <Prop name="controlPresets" type="Object<ControlPresets>">
    <div>
      This prop is an object containing the following optional button style
      presets. The two default style presets for the play button and the rest of
      the buttons can be changed via the theme, but more granuality is only
      currently possible via these props.
    </div>
    <ul>
      <li>
        previous: preset for previous track button, defaults to
        iconButtonMinimalPrimary
      </li>
      <li>
        replay: preset for skip replay button, defaults to iconButtonMinimalPrimary
      </li>
      <li>play: preset for play / pause button, defaults to iconButtonSolidPrimary</li>
      <li>
        forward: preset for skip forward button, defaults to
        iconButtonMinimalPrimary
      </li>
      <li>
        next: preset for next track button, defaults to iconButtonMinimalPrimary
      </li>
    </ul>
  </Prop>
</Block>

## Playground - Live Player

<Playground
  componentName="AudioPlayer"
  newskitPath="/audio-player"
  component={props => (
      <AudioPlayer {...props} live />
  )}
  knobs={[
    {
      name: 'Source',
      propName: 'src',
      value: 'https://radio.talkradio.co.uk/stream',
    },
    {
      name: 'Auto Play',
      propName: 'autoPlay',
      type: 'boolean',
      value: false,
    },
    {
      name: 'captionSrc',
      propName: 'captionSrc',
      value: 'captionsSrc.vtt',
    },
  ]}
/>

## Playground - Recorded Player

<Playground
  componentName="AudioPlayer"
  newskitPath="/audio-player"
  component={AudioPlayer}
  knobs={[
    {
      name: 'Source',
      propName: 'src',
      value:
        'https://extras.thetimes.co.uk/web/public/2018/world-cup-alexa-breifing/assets/latest-briefing.mp3',
    },
    {
      name: 'Auto Play',
      propName: 'autoPlay',
      type: 'boolean',
      value: false,
    },
    {
      name: 'Caption Src',
      propName: 'captionSrc',
      value: 'captionsSrc.vtt',
    },
    {
      name: 'Disable Previous Track',
      propName: 'disablePreviousTrack',
      type: 'boolean',
      value: true,
    },
    {
      name: 'Disable Next Track',
      propName: 'disableNextTrack',
      type: 'boolean',
      value: false,
    },
    {
      name: 'Skip Next Track',
      propName: 'onNextTrack',
      value: (() => {})
    },
    { 
      name: 'Skip Previous Track',
      propName: 'onPreviousTrack',
      value: (() => {})
    },
    {
      name: 'Popout',
      propName: 'popoutHref',
      value: 'https://newskit.co.uk'
    }
  ]}
/>

## Rationale

### Styling

The Audio Player's internal components can be styled as required.

### Accessibility

The controls of the Audio Player are fully accessible with the keyboard.
