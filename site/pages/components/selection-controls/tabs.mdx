import Layout from '../../../components/layout';
import Playground from '../../../components/playground';
import {Prop} from '../../../components/prop';
import {TextBoxSwatch} from '../../../components/theming-values/colors';
import {LegacyBlock} from '../../../components/legacy-block';
import {CodeFromDefaultPresets, CodeFromFile} from '../../../components/code';
import {InlineCode} from '../../../components/markdown-elements';
import {TabsScrollSnap} from '../../../demo-components/tabs/tabs-scroll-snap.tsx';

import {
  Tab,
  TabSize,
  IconFilledEmail,
  Block,
  Tabs,
  TabsDistribution,
  UnorderedList,
  TabAlign,
  TabsIndicatorPosition,
  Link,
  TextBlock,
} from 'newskit';

export default Layout;

# Tabs

## Tabs Overview

Tabs component is used as a way of switching between different content panels.

## Tabs Usage

Tabs is used for users to alternate between views within the same context, not to navigate to different areas.

The Tab components nested within Tabs should all look and work the same where possible.

## Tabs Props

Tabs have a number of props to facilitate a variety of uses:

<LegacyBlock marginTop="sizing040">
  <Prop name="children" type="React.ReactElement<TabProps>[]" required>
    <InlineCode>Tabs</InlineCode> expects multiple
    <InlineCode>Tab</InlineCode> components as children.
    <br />
    Refer to the code example below.
  </Prop>
  <Prop name="divider" type="boolean">
    Optional dividers between each Tab.
  </Prop>
  <Prop name="size" type="TabSize" enum={TabSize} default={TabSize.Medium}>
    Optional size of the Tab: Small, Medium or Large.
  </Prop>
  <Prop name="vertical" type="boolean" default={false}>
    Allows the Tabs to flow vertically. The Tabs component is laid out
    horizontally by default.
  </Prop>
  <Prop name="initialSelectedIndex" type="number" default={0}>
    Index of the initially selected tab
  </Prop>
  <Prop
    name="distribution"
    type="TabsDistribution"
    default="TabsDistribution.Start"
  >
    Change the distribution of the tabs.
    <br />
    <br />
    When flow is set to horizontal:
    <br />
    <UnorderedList>
      <>
        <InlineCode>start</InlineCode> Align the Tabs to the left of the
        content area having the width of the individual tab component defined by
        the width of their children.
      </>
      <>
        <InlineCode>grow</InlineCode> Spread all tab children equally
        across the content area, filling the entire width. Each tab’s width
        should be defined by that of its child.
      </>
      <>
        <InlineCode>equal</InlineCode> Space each tab across the content
        area equally, regardless of the width of its child.
      </>
    </UnorderedList>
    <br />
    When flow is vertical:
    <UnorderedList>
      <>
        <InlineCode>start</InlineCode> Align the Tabs to the top of the
        content area with the height of the individual tab components defined by
        the height of their children.
      </>
      <>
        <InlineCode>grow</InlineCode> Spread all tab children equally
        across the content area, filling the entire height. Each tab’s height
        should be defined by that of its child.
      </>
      <>
        <InlineCode>equal</InlineCode> Space each tab across the content
        area equally, regardless of the height of its child.
      </>
    </UnorderedList>
  </Prop>
  <Prop name="align" type="TabAlign">
      Set the text alignment for Tabs.<br /><br />
     
     <UnorderedList>
      <>
        <InlineCode>Center</InlineCode> Centers the text
      </>
      <>
        <InlineCode>Start</InlineCode> Aligns the text to the left
      </>
      <>
        <InlineCode>End</InlineCode> Aligns the text to the right
      </>
    </UnorderedList>
    <br />
    <b>NOTE:</b> Default value depends on <InlineCode>vertical</InlineCode> prop:
    when is <InlineCode>true</InlineCode> the value is set to <InlineCode>TabAlign.Start</InlineCode>,
    and <InlineCode>TabAlign.Center</InlineCode> when is <InlineCode>false</InlineCode>.

  </Prop>
  <Prop name="indicatorPosition" type="TabsIndicatorPosition" default="TabsIndicatorPosition.End">
      Set the position of the selection indicator.<br /><br />
     
     <UnorderedList>
      <>
        <InlineCode>Start</InlineCode> Positions the selection indicator before the tabs. 
      </>
      <>
        <InlineCode>End</InlineCode> Positions the selection indicator after the tabs.
      </>
      <>
        <InlineCode>None</InlineCode> No selection indicator is displayed.
      </>
    </UnorderedList>

  </Prop>  
  <Prop name="overrides" type="object">
    If provided, overrides the respective presets for the component and provided
    elements. Here are the overrides that the Tabs accepts:
    <Prop name="spaceInline" type="MQ<string>">
      The value for this prop should be a space token, If provided, this
      overrides the space between the Tabs navigation and Tabs content
    </Prop>
    <Prop name="divider" type="DividerProps['overrides']">
      If provided, this overrides the styles applied to the
      optional <Link href="/components/layout/divider">dividers</Link> between
      the tab buttons.
    </Prop>
    <Prop name="selectionIndicator" type="object">
      <Prop name="track" type="object">
        <Prop name="stylePreset" type="MQ<string>">
          If provided, this overrides the style preset applied to the track.
        </Prop>
        <Prop name="weight" type="string">
          If provided, this sets a fixed weight (height if horizontal, width if
          vertical) to the tab bar track. This can be a sizing token from the theme,
          or any CSS length value.
        </Prop>
      </Prop>
      <Prop name="indicator" type="object">
        <Prop name="stylePreset" type="MQ<string>">
          If provided, this overrides the style preset applied to the indicator.
        </Prop>
        <Prop name="size" type="string">
          If provided, sets the size of the tab bar indicator,
          width for horizontal orientation, height for vertical orientation.
          This can be a sizing token, pixel unit or percent value based on the
          size of the selected tab button.
          <br />
          <br />
          <b>NOTE:</b> The tab indicator can't grow bigger than the size of the current tab.
        </Prop>
        <Prop name="weight" type="string">
          If provided, this sets a fixed weight (height if horizontal, width if
          vertical) to the tab bar indicator. This can be a sizing token from the
          theme, or any CSS length value.
        </Prop>
        <Prop name="motionDuration" type="string">
          If provided, sets the duration of the indicator animation.
        </Prop>
        <Prop name="motionTiming" type="string">
          If provided, sets the easing of the indicator animation.
        </Prop>
      </Prop>
    </Prop>
    <Prop name="scroll" type="ScrollProps['overrides']">
      If provided, this overrides the styles applied to the <Link href="/components/layout/scroll">Scroll</Link>.
      Note: The same overrides object can be added in `components-defaults`.
    </Prop>
    Refer to the defaults below for the object structure:
    <CodeFromDefaultPresets componentName="tabs" />

  </Prop>
</LegacyBlock>

## Tabs Code Example

Here is an example of how the Tabs and Tab components are used.

<CodeFromFile path="examples/tabs/tabs.tsx" />

## Tabs Playground

<Playground
  componentName="Tabs"
  newskitPath="/tabs"
  component={state => (
    <div style={{width: '100%'}}>
      <Tabs {...state}>
        <Tab label="Now playing">
          <TextBlock typographyPreset="utilityBody020">
            Stories of our Times | One remarkable story, told in depth, each
            day. Our daily news podcast takes you to the heart of the stories
            that matter, with exclusive access and reporting. Published for the
            start of your day and hosted by Manveen Rana and David Aaronovitch.
          </TextBlock>
        </Tab>
        <Tab label="Up next">
          <TextBlock typographyPreset="utilityBody020">
            Red Box | News Podcast of the Year: Matt Chorley presents the best
            interviews, analysis and panel discussions from his Times Radio
            show. Listen live 10am-1pm Monday to Thursday.
          </TextBlock>
        </Tab>
        <Tab label="Later">
          <TextBlock typographyPreset="utilityBody020">
            Stories of our Times | One remarkable story, told in depth, each
            day. Our daily news podcast takes you to the heart of the stories
            that matter, with exclusive access and reporting. Published for the
            start of your day and hosted by Manveen Rana and David Aaronovitch.
          </TextBlock>
        </Tab>
      </Tabs>
    </div>
  )}
  knobs={[
    {
      name: 'Distribution',
      propName: 'distribution',
      options: [
        {
          label: 'TabsDistribution.Start',
          value: TabsDistribution.Start,
          isDefault: true,
        },
        {
          label: 'TabsDistribution.Grow',
          value: TabsDistribution.Grow,
        },
        {
          label: 'TabsDistribution.Equal',
          value: TabsDistribution.Equal,
        },
      ],
    },
    {
      name: 'Size',
      propName: 'size',
      options: [
        {
          label: 'TabSize.Small',
          value: TabSize.Small,
        },
        {
          label: 'TabSize.Medium',
          value: TabSize.Medium,
          isDefault: true,
        },
        {
          label: 'TabSize.Large',
          value: TabSize.Large,
        },
      ],
    },
    {
      name: 'Space Inline',
      propName: 'overrides',
      options: [
        {
          label: 'Default',
          value: {spaceInline: undefined},
          isDefault: true,
        },
        {
          label: 'space040',
          value: {spaceInline: 'space040'},
        },
        {
          label: 'space060',
          value: {spaceInline: 'space060'},
        },
      ],
    },
    {
      name: 'Tab Bar Track Weight',
      propName: 'overrides',
      options: [
        {
          label: 'Default',
          value: {
            selectionIndicator: {
              track: {
                weight: undefined,
              },
            },
          },
          isDefault: true,
        },
        {
          label: 'borderWidth030',
          value: {
            selectionIndicator: {
              track: {
                weight: 'borderWidth030',
              },
            },
          },
        },
      ],
    },
    {
      name: 'Tab Bar Indicator Weight',
      propName: 'overrides',
      options: [
        {
          label: 'Default',
          value: {
            selectionIndicator: {
              indicator: {
                weight: undefined,
              },
            },
          },
          isDefault: true,
        },
        {
          label: 'borderWidth030',
          value: {
            selectionIndicator: {
              indicator: {
                weight: 'borderWidth030',
              },
            },
          },
        },
      ],
    },
    {
      name: 'Tab Bar Indicator size',
      propName: 'overrides',
      options: [
        {
          label: 'Default',
          value: {
            selectionIndicator: {
              indicator: {
                size: undefined,
              },
            },
          },
          isDefault: true,
        },
        {
          label: '75%',
          value: {
            selectionIndicator: {
              indicator: {
                size: '75%',
              },
            },
          },
        },
        {
          label: 'sizing050',
          value: {
            selectionIndicator: {
              indicator: {
                size: 'sizing050',
              },
            },
          },
        },
      ],
    },
    {
      name: 'Style preset overrides',
      propName: 'overrides',
      options: [
        {
          label: 'Default',
          value: {
            stylePreset: undefined,
          },
          isDefault: true,
        },
        {
          label: 'cardContainer',
          value: {
            stylePreset: 'cardContainer',
          },
        },
      ],
    },
    {
      name: 'divider',
      propName: 'divider',
      type: 'boolean',
      value: false,
    },
    {
      name: 'vertical',
      propName: 'vertical',
      type: 'boolean',
      value: false,
    },
    {
      name: 'initialSelectedIndex',
      propName: 'initialSelectedIndex',
      type: 'number',
      value: 0,
    },
    {
      name: 'Align',
      propName: 'align',
      options: [
        {
          label: 'TabAlign.Center',
          value: TabAlign.Center,
          isDefault: true,
        },
        {
          label: 'TabAlign.Start',
          value: TabAlign.Start,
        },
        {
          label: 'TabAlign.End',
          value: TabAlign.End,
        },
      ],
    },
    {
      name: 'Indicator Position',
      propName: 'indicatorPosition',
      options: [
        {
          label: 'TabsIndicatorPosition.Start',
          value: TabsIndicatorPosition.Start,
        },
        {
          label: 'TabsIndicatorPosition.End',
          value: TabsIndicatorPosition.End,
          isDefault: true,
        },
        {
          label: 'TabsIndicatorPosition.None',
          value: TabsIndicatorPosition.None,
        },
      ],
    },
  ]}
/>

## Tabs with scroll and scroll snaping

When tabs exceed the Tabs container then a scroll with arrow buttons will appear.
Scroll does not appear when `distribution` is set to `Equal`

<TabsScrollSnap />

## Tabs Accessibility

We recommend using the ARIA tab model. This works across all major screen readers and browser combinations.
If you are using a screen reader with Javascript turned on, you should be able to navigate the tabs pattern in the following way:

Keyboard support:

<UnorderedList>
  <>
    <InlineCode>Right Arrow</InlineCode>: Moves focus to the next tab. If focus
    is on the last tab, moves focus to the first tab.
  </>
  <>
    <InlineCode>Left Arrow</InlineCode>: Moves focus to the previous tab. If
    focus is on the first tab, moves focus to the last tab.
  </>
  <>
    <InlineCode>Up Arrow</InlineCode>: Same as Right Arrow but for vertical
    tabs.
  </>
  <>
    <InlineCode>Down Arrow</InlineCode>: Same as Left Arrow but for vertical
    tabs.
  </>
  <>
    <InlineCode>Home</InlineCode>: Moves focus to the first tab and activates
    it.
  </>
  <>
    <InlineCode>End</InlineCode>: Moves focus to the last tab and activates it.
  </>
</UnorderedList>

**NOTE:** All Accessibility features in `Tabs` component are based on the following <Link href="https://www.w3.org/TR/wai-aria-practices-1.2/#tabpanel" target="_blank">guidelines and best practices from W3C</Link> and more particularly <Link href="https://www.w3.org/TR/wai-aria-practices-1.2/examples/tabs/tabs-1/tabs.html">Tabs With Automatic Activation</Link>.

## Tab Overview

The `Tab` component is used within the `Tabs` as a way of switching between different views.

## Tab Usage

A `Tab` is used in a `Tabs` for users to alternate between views within the same context, not to navigate to different areas.
Tabs should all look and work the same where possible.

## Tab Props

Tab component has a number of props to facilitate a variety of uses:

<LegacyBlock marginTop="sizing040">
  <Prop name="children" type="React.ReactNode" required>
    Content rendered inside the tab panel.
    <br />
    <br />
    <b>NOTE:</b> The tab panel does not apply any typography or style preset by default.
    If you want to apply typography or style preset to your elements inside the tab
    panel, you can wrap them in <a href="/components/text-content/text-block">
      TextBlock
    </a> component or pass the presets directly to your components if they support
    overrides.
  </Prop>
  <Prop name="label" type="React.ReactNode" required>
    The content of the tab button
  </Prop>
  <Prop name="disabled" type="boolean" default={false}>
    If true, the Tab will render the disabled state of the style preset.
  </Prop>
  <Prop name="ariaLabel" type="string">
    The aria-label attribute is to allow a user to describe the action that will
    be performed when the user interacts with a tab in a Tabs. By default, this
    could be the primary label text.
  </Prop>
  <Prop name="overrides" type="object">
    If provided, overrides the respective presets for the component and provided
    elements. Here are the overrides that the Tab accepts:
    <Prop name="spaceInset" type="MQ<string>">
      If provided, this overrides the padding of the Tab. Otherwise,
      spaceInsetSquish020 or spaceInsetSquish030 is used depending on the `size`
      prop.
    </Prop>
    <Prop name="stylePreset" type="MQ<string>">
      If provided, this overrides the style preset applied to the Tab.
    </Prop>
    <Prop name="typographyPreset" type="MQ<string>">
      If provided, this overrides the typography preset applied to the Tab.
      Otherwise, label020 or label030 is used depending on the `size` prop.
    </Prop>
    <Prop name="spaceInline" type="MQ<string>">
      If provided, this overrides the space between multiple children in the
      underlying Stack. If less than 2 children are passed, this prop is
      irrelevant.
    </Prop>
    <Prop name="iconSize" type="string">
      If provided, this overrides the icon size of any child icons. Otherwise,
      iconSize010, iconSize020 or iconSize030 is used depending on the `size`
      prop. If no icons are present in the Tab's children then this prop is
      irrelevant.
      <br />
      <br />
      <b>NOTE:</b> You can also set the icon size by passing it directly as a size
      prop to the icon, but by doing this you will override the iconSize passed from
      overrides. We discourage this approach but we will keep the functionality in
      case it is needed.
    </Prop>
    <Prop name="minHeight" type="string">
      If provided, this sets a minimum height to the Tab. This can be a sizing
      token from the theme, or any CSS length value. By default, sizing060,
      sizing080 or sizing090 is used depending on the `size` prop.
    </Prop>
    Refer to the defaults below for the object structure:
    <CodeFromDefaultPresets componentName="tab" />
  </Prop>
</LegacyBlock>

## Tab Accessibility

We recommend using the ARIA tab model. This works across all major screen readers and browser combinations.<br/><br/>
Add aria-label prop to allow a user to describe the action that will be performed when the user interacts with a `Tab`. <br/>By default, this could be the primary label text.<br/>Where there are no text labels, the icon will need to be assigned a name.

## SEO

Ensure icons have alt text.

## Browser compatibility

The animated highlight indicator that tracks the active tab is absolutely positioned.
When the active tab changes, the layout of the indicator is recalculated.
This means any change in the active tab's position or size, not caused by an active tab change,
could lead to the indicator having an outdated layout.

To solve this problem we use a [`ResizeObserver`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver),
which watches tabs container for size changes and re-position the indicator accordingly.
The `ResizeObserver` is supported by all modern browsers but doesn't exist in Internet Explorer.
If you need this behavior in IE, we suggest using a polyfill for the `ResizeObserver` such as [this one](https://www.npmjs.com/package/@juggle/resize-observer).
We do not include the polyfill by default to avoid adding a few KB to the bundle size of the Tabs component.
