import Layout from '../../components/layout';
import Playground from '../../components/playground';
import Prop from '../../components/prop';

import {RadioPlayer, UnorderedList, Circle, Block} from 'newskit';

export default Layout;

# Radio Player

## Overview

The Radio Player component is a collection of custom features and elements built around the native `<audio>` element.

### Usage

The Radio Player requires a source stream to be passed in as a prop. This will then be loaded into the internal `<audio>` element for playback.

## Props

<Block marginTop="sizing050">
  <Prop name="src" type="string" required>
    URL of the audio source to be played.
  </Prop>
  <Prop name="title" type="string" required>
    The title of the currently playing show or track.
  </Prop>
  <Prop name="imgSrc" type="string" required>
    Image to illustrate the show.
  </Prop>
  <Prop name="imgAlt" type="string" required>
    Alt text for the show image, this should describe the contents of the image.
  </Prop>
  <Prop name="description" type="string">
    Description text for the current show or track.
  </Prop>
  <Prop name="time" type="string">
    Textual description of the show time e.g. 1PM - 3PM.
  </Prop>
  <Prop name="live" type="boolean">
    If true will display a label indicating the current show is live.
  </Prop>
  <Prop name="ariaLandmark" type="string">
    The aria-label attribute for the radio player. It is recommended that you set this
    for screen readers to be able to explain the radio player purpose. ariaLandmark should be unique, 
    so the same value should not appear on the same page more than once.
  </Prop>
  <Prop name="flag" type="React.Component | string">
    If this parameter is provided as a string, the text of the default Flag
    component will change according to the passed value. <br />
    If this is provided as a custom component, it will replace the current Live Flag implementation.
    In this case it is recommended for the passed component to be a <b>Flag</b>.
    Also you will have to provide the desired style preset and spacings to your component
    (the default one is <b>flagSolidLive</b>). <br />
    If left undefined nothing will be rendered.
  </Prop>
  <Prop name="autoplay" type="boolean">
    <div>
      Even though the feature is supported in most browser but the browser will
      only follow this setting if:
    </div>
    <ul>
      <li>
        you are on a desktop browser. it will not work on mobile browsers to
        prevent users from eating into their mobile data allowance
      </li>
      <li>
        it can't happen on page load, the user has to interact with the site for
        it to work: navigating inside an SPA seems to satisfy the browser as
        there was no page refresh.
      </li>
    </ul>
    <div>
      In Summary autoplay will work in some scenarios, this is expected. It's
      best thought of as a suggestion for the browser: play the audio
      automatically if it's acceptable from a usability perspective
    </div>
  </Prop>
  <Prop name="tags" type="Array<string>">
    List of tags to describe the current show, e.g. comedy, politics
  </Prop>
  <Prop name="captionSrc" type="string">
    Source for audio transcription generally provided in{' '}
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebVTT_API">
      web vtt format
    </a>
    .
  </Prop>
  <Prop name="popoutHref" type="string">
    Url to player hosted by itself on page. Will open in a new window and pause current instance. 
  </Prop>
  <Prop name="volumePresets" type="Object<SliderStylePresets>">
    <div>
      This prop is an object containing all the following volume slider style
      presets. For more details please see the slider prop documentation
      [here](/components/slider). The default style presets can be changed via
      the theme.
    </div>
    <ul>
      <li>sliderIndicatorTrackStylePreset</li>
      <li>sliderThumbStylePreset</li>
      <li>sliderTrackStylePreset</li>
      <li>sliderLabelsStylePreset</li>
    </ul>
  </Prop>
  <Prop name="trackPresets" type="Object<SliderStylePresets>">
    This prop is for the audio track slider, it has the same keys as
    volumePresets, plus "bufferingStylePreset" to allow overriding of the
    buffering colour. If in live mode, the track slider is not shown and so
    these presets are ignored. The default style presets can be changed via the
    theme.
  </Prop>
  <Prop name="controlPresets" type="Object<ControlPresets>">
    <div>
      This prop is an object containing the following optional button style
      presets. The two default style presets for the play button and the rest of
      the buttons can be changed via the theme, but more granuality is only
      currently possible via these props.
    </div>
    <ul>
      <li>
        previous: preset for previous track button, defaults to
        iconButtonMinimalPrimary
      </li>
      <li>
        replay: preset for skip replay button, defaults to iconButtonMinimalPrimary
      </li>
      <li>play: preset for play / pause button, defaults to iconButtonSolidPrimary</li>
      <li>
        forward: preset for skip forward button, defaults to
        iconButtonMinimalPrimary
      </li>
      <li>
        next: preset for next track button, defaults to iconButtonMinimalPrimary
      </li>
    </ul>
  </Prop>
</Block>

## Playground - Live Player

<Playground
  componentName="RadioPlayer"
  newskitPath="/radio-player"
  component={RadioPlayer}
  knobs={[
    {
      name: 'Source',
      propName: 'src',
      value: 'https://radio.talkradio.co.uk/stream',
    },
    {
      name: 'Flag',
      propName: 'flag',
      value: 'Live',
    },
    {
      name: 'Title',
      propName: 'title',
      value: 'Talk Radio Live',
    },
    {
      name: 'Description',
      propName: 'description',
      value: 'Live from talkRadio.',
    },
    {
      name: 'Time',
      propName: 'time',
      value: '1PM to 3PM',
    },
    {
      name: 'Live',
      propName: 'live',
      type: 'boolean',
      value: true,
    },
    {
      name: 'Auto Play',
      propName: 'autoPlay',
      type: 'boolean',
      value: false,
    },
    {
      name: 'Tags',
      propName: 'tags',
      value: ['News', 'Sport', 'Live'],
    },
    {
      name: 'Image Source',
      propName: 'imgSrc',
      value: 'https://via.placeholder.com/150',
    },
    {
      name: 'Image Alt Text',
      propName: 'imgAlt',
      value: 'Giles Coren',
    },
    {
      name: 'captionSrc',
      propName: 'captionSrc',
      value: 'captionsSrc.vtt',
    },
    {
      name: 'ariaLandmark',
      propName: 'ariaLandmark',
      value: 'live radio player',
    },
  ]}
/>

## Playground - Recorded Player

<Playground
  componentName="RadioPlayer"
  newskitPath="/radio-player"
  component={RadioPlayer}
  knobs={[
    {
      name: 'Source',
      propName: 'src',
      value:
        'https://extras.thetimes.co.uk/web/public/2018/world-cup-alexa-breifing/assets/latest-briefing.mp3',
    },
    {
      name: 'Flag',
      propName: 'flag',
      value: 'Most Popular',
    },
    {
      name: 'Title',
      propName: 'title',
      value: 'Talk Radio Live',
    },
    {
      name: 'Description',
      propName: 'description',
      value: 'Live from talkRadio.',
    },
    {
      name: 'Time',
      propName: 'time',
      value: '1PM to 3PM',
    },
    {
      name: 'Live',
      propName: 'live',
      type: 'boolean',
      value: false,
    },
    {
      name: 'Auto Play',
      propName: 'autoPlay',
      type: 'boolean',
      value: false,
    },
    {
      name: 'Tags',
      propName: 'tags',
      value: ['News', 'Sport', 'Live'],
    },
    {
      name: 'Image Source',
      propName: 'imgSrc',
      value: 'https://via.placeholder.com/150',
    },
    {
      name: 'Image Alt Text',
      propName: 'imgAlt',
      value: 'Giles Coren',
    },
    {
      name: 'captionSrc',
      propName: 'captionSrc',
      value: 'captionsSrc.vtt',
    },
    {
      name: 'Popout',
      propName: 'popoutHref',
      value: 'https://newskit.co.uk'
    },
    {
      name: 'ariaLandmark',
      propName: 'ariaLandmark',
      value: 'recorded radio player',
    },
  ]}
/>

## Rationale

### Styling

The Radio Player's internal components can be styled as required.

### Accessibility

The controls of the Radio Player are fully accessible with the keyboard.
